# Release Notes (@stefnotch)
- Implemented Johannes' patches compute shader, together with Leo and Ferris
- [Render differently](https://github.com/cg-tuwien/Math2Model/blob/4e4fad9ce7e8ae91bb1eace2159a5d59e92afa22/parametric-renderer-core/renderer-core/src/renderer.rs#L926-L949) sized [quads](https://github.com/cg-tuwien/Math2Model/blob/4e4fad9ce7e8ae91bb1eace2159a5d59e92afa22/parametric-renderer-core/renderer-core/src/renderer.rs#L382-L387) based on patch size (2x2, 4x4, 8x8, 16x16)
- Improved patches storage format https://github.com/cg-tuwien/Math2Model/blob/4e4fad9ce7e8ae91bb1eace2159a5d59e92afa22/parametric-renderer-core/shaders/Common.wgsl#L1-L5
- Added support for instancing
- Improved Babylon.js shader creation API https://forum.babylonjs.com/t/shadermaterial-constructor-type-safety/49030
- Implemented indirect dispatching for compute shaders ( https://github.com/BabylonJS/Babylon.js/pull/14970 and https://github.com/BabylonJS/Babylon.js/pull/15024 and https://github.com/BabylonJS/Babylon.js/pull/15025 )
- Re-integrate Monaco code editor
- Hooked up light and dark theme in a lot of places
- Hooked up global error reporter https://github.com/cg-tuwien/Math2Model/blob/4e4fad9ce7e8ae91bb1eace2159a5d59e92afa22/src/main.ts#L11-L27
- Deploy to GitHub pages with [a GitHub action](https://github.com/cg-tuwien/Math2Model/blob/main/.github/workflows/deploy.yml)
- Added .zip import and export with [zip.js](https://gildas-lormeau.github.io/zip.js/)
- Added [JSON schema](https://github.com/cg-tuwien/Math2Model/blob/main/src/filesystem/scene-file.ts) for the `scene.json` file and integrated it with the code editor. This enables autocomplete in the `scene.json` file.
- Implemented tree-like scene and file browser (left side)
- Implemented correct tree selections, with shift and ctrl clicks https://github.com/cg-tuwien/Math2Model/blob/4e4fad9ce7e8ae91bb1eace2159a5d59e92afa22/src/components/node-tree/NodeTree.vue#L28-L134
- Hooked up number input for [vectors](https://github.com/cg-tuwien/Math2Model/blob/main/src/components/input/VectorInput.vue) and [euler angles](https://github.com/cg-tuwien/Math2Model/blob/main/src/components/input/EulerInput.vue)
- Hooked up color picker https://github.com/cg-tuwien/Math2Model/blob/main/src/components/input/ColorInput.vue
- Added an  [object diff API](https://github.com/cg-tuwien/Math2Model/blob/main/src/components/input/object-update.ts) for edits. It lets us edit a specific object property, and supports efficient "sliding" updates.
- Implement editing multiple objects simultaneously. Try selecting multiple objects and change their color.
- Use the browser's origin private filesystem for storing files, and deal with its asynchronity https://github.com/cg-tuwien/Math2Model/blob/main/src/filesystem/reactive-files.ts
- Integrate [winit](https://crates.io/crates/winit) for windowing
- Implemented [orbitcam](https://github.com/cg-tuwien/Math2Model/blob/main/parametric-renderer-core/renderer-core/src/camera/orbitcam_controller.rs) and [freecam](https://github.com/cg-tuwien/Math2Model/blob/main/parametric-renderer-core/renderer-core/src/camera/freecam_controller.rs)
- Persist camera settings and position in desktop mode, and enable camera mode switching https://github.com/cg-tuwien/Math2Model/blob/main/parametric-renderer-core/desktop/src/config.rs
- Implemented cursor capturing https://github.com/cg-tuwien/Math2Model/blob/main/parametric-renderer-core/renderer-core/src/input/cursor_capture.rs
- Ported a [PBR shader](https://github.com/cg-tuwien/Math2Model/blob/4e4fad9ce7e8ae91bb1eace2159a5d59e92afa22/parametric-renderer-core/shaders/Shader.wgsl#L456-L532) from the [gltf sample viewer](https://github.com/KhronosGroup/glTF-Sample-Renderer/blob/742db42ce90bf36e239c6fde6ffbe4f267fa83a0/source/Renderer/shaders/pbr.frag). This involved converting GLSL to WGSL, figuring out which #ifdefs were applicable, and only picking out the relevant shader code out of their many files.
- Automated shader code copying https://github.com/cg-tuwien/Math2Model/tree/main/parametric-renderer-core/copy-includes
- Hash-based checks for illegal modifications to autogenerated shader code https://github.com/cg-tuwien/Math2Model/blob/4e4fad9ce7e8ae91bb1eace2159a5d59e92afa22/parametric-renderer-core/copy-includes/src/lib.rs#L72-L82
- Add support for textures
- Reactive updates via [Leptos' reactive_graph](https://crates.io/crates/reactive_graph). e.g. When a texture is changed, we *only* recreate [the GPU texture](https://github.com/cg-tuwien/Math2Model/blob/4e4fad9ce7e8ae91bb1eace2159a5d59e92afa22/parametric-renderer-core/renderer-core/src/renderer.rs#L858-L869) and the [bind groups which referenced the texture](https://github.com/cg-tuwien/Math2Model/blob/4e4fad9ce7e8ae91bb1eace2159a5d59e92afa22/parametric-renderer-core/renderer-core/src/renderer.rs#L889-L910). 
- Improve async_spawner, which the reactivity library depends on, twice ( https://github.com/leptos-rs/leptos/pull/3089 and https://github.com/leptos-rs/leptos/pull/3091 )
- Fix memoized values in the reactivity library https://github.com/leptos-rs/leptos/pull/3495
- Generate type-safe bindings for WGSL code https://github.com/ScanMountGoat/wgsl_to_wgpu
- Implemented showing shader compilation errors in code editor
- Implemented shader compilation error reporting API in wgpu, which we depend on https://github.com/gfx-rs/wgpu/pull/5410
- Helped fix Firefox's shader compilation error locations https://phabricator.services.mozilla.com/D205173 and added shader compilation error reporting to WebGPU CTS https://github.com/gpuweb/cts/pull/3513
- Started unofficial working group for more ergonomic WGSL https://wesl-lang.dev/
- Added GPU profiling with [wgpu-profiler](https://crates.io/crates/wgpu-profiler)
- Added statistical [benchmarking infrastructure](https://github.com/cg-tuwien/Math2Model/blob/main/parametric-renderer-core/renderer-core/benches/gpu_bench.rs) via [criterion2](https://crates.io/crates/criterion2)
- Generate flamegraphs that can be viewed in Chrome via wgpu-profiler https://github.com/cg-tuwien/Math2Model/blob/4e4fad9ce7e8ae91bb1eace2159a5d59e92afa22/parametric-renderer-core/renderer-core/src/application.rs#L219-L224
- [Generate Typescript bindings](https://github.com/cg-tuwien/Math2Model/blob/main/parametric-renderer-core/wasm/src/wasm_abi.rs) for WASM with [tsify-next](https://crates.io/crates/tsify-next)
- Enable sharing WebGPU context with Typescript and Rust https://github.com/cg-tuwien/Math2Model/blob/main/src/webgpu-hook.ts
- Added ground plane, with hot reloading of shader in desktop mode https://github.com/cg-tuwien/Math2Model/blob/main/parametric-renderer-core/renderer-core/src/renderer/ground_plane.rs
- Added grid shader for ground plane https://github.com/cg-tuwien/Math2Model/blob/main/parametric-renderer-core/shaders/GroundPlane.wgsl
- Added skybox https://github.com/cg-tuwien/Math2Model/blob/main/parametric-renderer-core/renderer-core/src/renderer/skybox.rs
- Implemented reverse z for depth buffer https://iolite-engine.com/blog_posts/reverse_z_cheatsheet
- Implemented user-overridable `getColor` function
- Reworked the UI design
- Set up [vitepress](https://vitepress.dev/) for the documentation site
