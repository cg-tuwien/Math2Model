# Core Renderer

This is a basic wgpu application, implementing the parametric function rendering algorithm.

To learn more about wgpu, we recommend checking out a tutorial. https://sotrh.github.io/learn-wgpu/#what-is-wgpu

This crate deals with

- The renderer! (`renderer.rs`)
- Winit
  - A winit application with an async renderer setup, used by both the desktop and web (`application.rs`)
  - Abstracting over "running with a window" and "running in headless mode" (`window_or_fallback.rs`)

- A custom wrapper of an async executor, used in the rendering loop to make sure that we've finished updating all changes (`local_executor.rs`)
- User input handling (`input/...`)
- The camera, both a freecam and an orbitcam are implemented (`camera/...`). One can seamlessly switch between the two
- Various utilities one usually sees in games
  - A struct to store transformations (translation, rotation, scale) (`transform.rs`)
  - Time keeping, with delta_time (`time.rs` and `time/frame_counter.rs`)
  - The CPU state of the game, containing objects such as the camera (`game.rs`)- 
- Abstractions for wgpu objects
  - Color and depth textures (`texture.rs`)
  - Meshes with a vertex and index buffer (`mesh.rs`)
  - Uniform and storage buffers (`buffers.rs`)
- Autogenerated safe shader bindings via [wgsl_to_wgpu](https://github.com/ScanMountGoat/wgsl_to_wgpu) (`shaders.rs` and `build.rs`)
- Benchmarking via [wgpu-profiler](https://github.com/Wumpf/wgpu-profiler) and [criterion](https://crates.io/crates/criterion2) (`benches/...` and `time/time_counters.rs`)

## The Renderer

Due to interactive edeting requirements, we do not have a straightforward wgpu renderer.

Instead, whenever the user changes something, such as removing a texture from a model, we want to update *only* the affected objects.

To do this change tracking, we opted for a reactive architecture, as explained in [mighdoll.dev/blog/reactive-webgpu](https://mighdoll.dev/blog/reactive-webgpu/). Implementing this in Rust was done by using the [Leptos reactive_graph](https://crates.io/crates/reactive_graph) library.

You'll also find a few experiments in the `reactive/..` folder that are unused. This reactive rendering architecture is, to our knowledge, rather novel and does not have a lot of existing literature which we could have learned from.
